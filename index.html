<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"
    />
    <title>DeepAR</title>
    <style>
      canvas.deepar {
        border: 0px none;
        background-color: black;
        display: block;
        margin: auto;
        -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
      }

      body {
        margin: 0px;
        padding: 0px;
      }

      #loader-wrapper {
        position: fixed;
        top: 0px;
        left: 0px;
        width: 100%;
        height: 100%;
        background-color: #fff;
        text-align: center;
      }

      .loader {
        display: inline-block;
        position: relative;
        top: 42%;
        z-index: 1000;

        width: 90px;
        height: 90px;
        margin: auto;
        background-color: #00f;

        border-radius: 100%;
        -webkit-animation: sk-scaleout 1.5s infinite ease-in-out;
        animation: sk-scaleout 1.5s infinite ease-in-out;
      }

      @-webkit-keyframes sk-scaleout {
        0% {
          -webkit-transform: scale(0);
        }
        100% {
          -webkit-transform: scale(1);
          opacity: 0;
        }
      }

      @keyframes sk-scaleout {
        0% {
          -webkit-transform: scale(0);
          transform: scale(0);
        }
        100% {
          -webkit-transform: scale(1);
          transform: scale(1);
          opacity: 0;
        }
      }

      .control-buttons {
        position: fixed;
        top: 0px;
        left: 0px;
        width: 200px;
        height: 250px;
      }

      .control-buttons > button {
        width: 200px;
        height: 20px;
      }

      .load_img_description {
        font-family: Arial, Helvetica, sans-serif;
      }
    </style>
  </head>
  <body>
    <canvas
      class="deepar"
      id="deepar-canvas"
      oncontextmenu="event.preventDefault()"
    ></canvas>
    <div id="loader-wrapper">
      <h3 class="load_img_description">
        Load image from the left menu and apply some effects
      </h3>
      <span class="loader"></span>
    </div>

    <div class="control-buttons">
      <button id="load-photo-1">Yaji</button>
      <button id="load-photo-2">Masashi</button>
      <button id="load-photo-3">Load photo 3</button>

      <button id="apply-makeup-look-1">化粧</button>
      <button id="apply-makeup-look-2">amongs</button>
      <button id="apply-makeup-look-3">化粧２</button>
      <button id="apply-makeup-look-4">アノニマス</button>
      <button id="apply-makeup-look-5">アノニマス２</button>
      <button id="apply-makeup-look-6">ツインテール</button>
      <button id="apply-makeup-look-7">つの</button>
      <button id="apply-makeup-look-8">人</button>
      <button id="apply-makeup-look-9">大石</button>
      <button id="apply-makeup-look-10">リーゼントチック</button>
      <button id="apply-makeup-look-11">カチューシャ</button>
      <button id="apply-makeup-look-12">チャイナ</button>
      <button id="apply-makeup-look-13">グラサン</button>
      <button id="apply-makeup-look-14">角刈り</button>
      <button id="apply-makeup-look-15">悟空</button>
      <button id="apply-makeup-look-16">Fire</button>
      <button id="apply-makeup-look-17">なめくじ</button>
      <button id="apply-makeup-look-18">老い</button>
      <button id="apply-makeup-look-19">のいど</button>
      <button id="apply-makeup-look-20">フラワー</button>
      <button id="apply-makeup-look-21">デビル</button>
      <button id="apply-makeup-look-22">アンゲル</button>
      <button id="apply-makeup-look-23">meet</button>
      <button id="apply-makeup-look-24">ヘルメット</button>
      <button id="apply-makeup-look-25">ハーフ</button>

      <button id="remove-makeup-filter">Remove makeup filter</button>

      <button id="download-photo">Download photo</button>
    </div>

    <script type="text/javascript" src="lib/deepar.js"></script>
    <script type="text/javascript">
      var canvasHeight = window.innerHeight;
      var canvasWidth = window.innerWidth;

      if (window.innerWidth > window.innerHeight) {
        canvasWidth = Math.floor(window.innerHeight * 0.66);
      }

      var deepAR = DeepAR({
        canvasWidth: canvasWidth,
        canvasHeight: canvasHeight,
        licenseKey:
          "7ea868436ff9abbdc43b0400090f161479b792c16fee2f59f74146fe4cc9e7d3d5321c57d4c47714",
        canvas: document.getElementById("deepar-canvas"),
        numberOfFaces: 1,
        onInitialize: function () {},

        onScreenshotTaken: function (photo) {
          var a = document.createElement("a");
          a.href = photo;
          a.download = "photo.png";
          document.body.appendChild(a);
          a.click();
        },
      });

      deepAR.onVideoStarted = function () {
        var loaderWrapper = document.getElementById("loader-wrapper");
        loaderWrapper.style.display = "none";
      };

      deepAR.downloadFaceTrackingModel("lib/models-68-extreme.bin");
      var image = new Image();

      function processPhoto(url) {
        var loaderWrapper = document.getElementById("loader-wrapper");
        loaderWrapper.style.display = "block";
        image.src = url;
        image.onload = function () {
          deepAR.processImage(image);
          var loaderWrapper = document.getElementById("loader-wrapper");
          loaderWrapper.style.display = "none";
        };
      }

      document.getElementById("load-photo-1").onclick = function () {
        processPhoto("./test_photos/yaji.JPG");
      };
      document.getElementById("load-photo-2").onclick = function () {
        processPhoto("./test_photos/masashi.png");
      };
      document.getElementById("load-photo-3").onclick = function () {
        processPhoto("./test_photos/ohashi1.png");
      };
      document.getElementById("apply-makeup-look-1").onclick = function () {
        deepAR.switchEffect(0, "makeup", "./effects/look1", function () {
          deepAR.processImage(image);
        });
      };
      document.getElementById("apply-makeup-look-2").onclick = function () {
        deepAR.switchEffect(0, "makeup", "./effects/amongs", function () {
          deepAR.processImage(image);
        });
      };
      document.getElementById("apply-makeup-look-3").onclick = function () {
        deepAR.switchEffect(0, "makeup", "./effects/look2", function () {
          deepAR.processImage(image);
        });
      };
      document.getElementById("apply-makeup-look-4").onclick = function () {
        deepAR.switchEffect(
          0,
          "makeup",
          "./effects/Vendetta_Mask",
          function () {
            deepAR.processImage(image);
          }
        );
      };
      document.getElementById("apply-makeup-look-5").onclick = function () {
        deepAR.switchEffect(0, "makeup", "./effects/mask", function () {
          deepAR.processImage(image);
        });
      };
      document.getElementById("apply-makeup-look-6").onclick = function () {
        deepAR.switchEffect(0, "makeup", "./effects/doragonhair1", function () {
          deepAR.processImage(image);
        });
      };
      document.getElementById("apply-makeup-look-7").onclick = function () {
        deepAR.switchEffect(0, "makeup", "./effects/doragonhair3", function () {
          deepAR.processImage(image);
        });
      };
      document.getElementById("apply-makeup-look-8").onclick = function () {
        deepAR.switchEffect(0, "makeup", "./effects/pepulu", function () {
          deepAR.processImage(image);
        });
      };
      document.getElementById("apply-makeup-look-9").onclick = function () {
        deepAR.switchEffect(0, "makeup", "./effects/hair1", function () {
          deepAR.processImage(image);
        });
      };
      document.getElementById("apply-makeup-look-10").onclick = function () {
        deepAR.switchEffect(0, "makeup", "./effects/hair2", function () {
          deepAR.processImage(image);
        });
      };
      document.getElementById("apply-makeup-look-11").onclick = function () {
        deepAR.switchEffect(0, "makeup", "./effects/ram", function () {
          deepAR.processImage(image);
        });
      };
      document.getElementById("apply-makeup-look-12").onclick = function () {
        deepAR.switchEffect(0, "makeup", "./effects/chaina", function () {
          deepAR.processImage(image);
        });
      };
      document.getElementById("apply-makeup-look-13").onclick = function () {
        deepAR.switchEffect(0, "makeup", "./effects/eye-glass", function () {
          deepAR.processImage(image);
        });
      };
      document.getElementById("apply-makeup-look-14").onclick = function () {
        deepAR.switchEffect(0, "makeup", "./effects/kakugari", function () {
          deepAR.processImage(image);
        });
      };
      document.getElementById("apply-makeup-look-15").onclick = function () {
        deepAR.switchEffect(0, "makeup", "./effects/goku2", function () {
          deepAR.processImage(image);
        });
      };
      document.getElementById("apply-makeup-look-16").onclick = function () {
        deepAR.switchEffect(0, "makeup", "./effects/Fire_Effect", function () {
          deepAR.processImage(image);
        });
      };
      document.getElementById("apply-makeup-look-17").onclick = function () {
        deepAR.switchEffect(0, "makeup", "./effects/Snail", function () {
          deepAR.processImage(image);
        });
      };
      document.getElementById("apply-makeup-look-18").onclick = function () {
        deepAR.switchEffect(0, "makeup", "./effects/Stallone", function () {
          deepAR.processImage(image);
        });
      };
      document.getElementById("apply-makeup-look-19").onclick = function () {
        deepAR.switchEffect(0, "makeup", "./effects/Humanoid", function () {
          deepAR.processImage(image);
        });
      };
      document.getElementById("apply-makeup-look-20").onclick = function () {
        deepAR.switchEffect(0, "makeup", "./effects/flower_face", function () {
          deepAR.processImage(image);
        });
      };
      document.getElementById("apply-makeup-look-21").onclick = function () {
        deepAR.switchEffect(0, "makeup", "./effects/Devil", function () {
          deepAR.processImage(image);
        });
      };
      document.getElementById("apply-makeup-look-22").onclick = function () {
        deepAR.switchEffect(0, "makeup", "./effects/angel", function () {
          deepAR.processImage(image);
        });
      };
      document.getElementById("apply-makeup-look-23").onclick = function () {
        deepAR.switchEffect(0, "makeup", "./effects/meet", function () {
          deepAR.processImage(image);
        });
      };
      document.getElementById("apply-makeup-look-24").onclick = function () {
        deepAR.switchEffect(
          0,
          "makeup",
          "./effects/viking_helmet",
          function () {
            deepAR.processImage(image);
          }
        );
      };
      document.getElementById("apply-makeup-look-25").onclick = function () {
        deepAR.switchEffect(
          0,
          "makeup",
          "./effects/Split_View_Look",
          function () {
            deepAR.processImage(image);
          }
        );
      };
      document.getElementById("remove-makeup-filter").onclick = function () {
        deepAR.clearEffect("makeup");
        deepAR.processImage(image);
      };
      document.getElementById("download-photo").onclick = function () {
        deepAR.takeScreenshot();
      };
    </script>
  </body>
</html>
